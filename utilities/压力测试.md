## 内存压力测试

* memtester

memtester主要是捕获内存错误和一直处于很高或者很低的坏位, 其测试的主要项目有随机值,异或比较,减法,乘法,除法,与或运算等等. 通过给定测试内存的大小和次数, 可以对系统现有的内存进行上面项目的测试。

```shell
# 参数
Usage: ./memtester [-p physaddrbase [-d device]] <mem>[B|K|M|G] [loops]
# mem:申请测试内存的大小，loops:次数
$ ./memtester 1M 1 #申请测试1M内存，测试1次
pagesize is 4096
pagesizemask is 0xfffff000
want 1MB (1048576 bytes)
got  1MB (1048576 bytes), trying mlock ...locked.
Loop 1/1:
  Stuck Address       : ok
  Random Value        : ok
  Compare XOR         : ok
  Compare SUB         : ok
  Compare MUL         : ok
  Compare DIV         : ok
  Compare OR          : ok
  Compare AND         : ok
  Sequential Increment: ok
  Solid Bits          : ok
  Block Sequential    : ok
  Checkerboard        : ok
  Bit Spread          : ok
  Bit Flip            : ok
  Walking Ones        : ok
  Walking Zeroes      : ok
  8-bit Writes        : ok
  16-bit Writes       : ok
Done.
```

## CPU压力测试

* 查看负载

```shell
$ uptime
02:43:06 up  2:43,  load average: 0.58, 0.52, 0.51
#load average表示1分5分15分钟内的平均负载
```

* stress-ng

```shell
$ ./stress-ng -c 2 -t 5 #开辟2个线程循环调用sqrt()，持续5s，
-c N: 				生成N个worker循环调用sqrt()产生cpu压力
-i N: 				生成N个worker循环调用sync()产生io压力
-m N: 				生成N个worker循环调用malloc()/free()产生内存压力
-d N: 				运行N worker HDD write/unlink测试
-t N:				测试持续N秒
-taskset N: 		将压力加到指定核心上
--cpu-method all:	worker从迭代使用30多种不同的压力算法，包括pi, crc16, fft等等
			  |
			 \ /
			 pi、crt16、fft...
```









